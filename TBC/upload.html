<html>
<head>
     <meta charset="utf-8">
     <meta nhttp-equiv="x-ua-compatible" content="ie=edge,chrome=1">
    
    <link rel="stylesheet" href="main.css">
    <link href='https://fonts.googleapis.com/css?family=Athiti' rel='stylesheet'>
</head>

<body>

    <div id="wrapper">
        <header id="top-section">
            <img src="atom.png" id="logo">
            <h1>The Bohring club</h1>
        </header>
        

        
        
        <nav>
            <ul class="menu">
            
              <li> <a href="homepage.html">home</a></li>
                <li> <a href="discover.html">discover</a></li>
                <div id="upload_drop"><li> <a href="upload.html">upload</a></li></div>
                <li> <a href="about.html">about</a></li>
                <li> <a href="login.html">login</a></li>
            
                
            </ul>
        </nav>
        
       <header id ="web-title">
            <h1 id="title_1">The Short Journal</h1>
           <h2 id="subtitle_1">An open source research paper repository</h2>
           
        </header>
        
  
          <div id="upload_section">
        
        
                <div id="text_upload_area">
                      <textarea
                        id="text_id" 
                        cols="40" 
                        rows="4" 
                        name="text" 
                        placeholder="Please give additional details about this paper..."></textarea>
                </div>
              
              
        <progress value="0" max="100" id="uploader">0%</progress>
              
        <input type="file" value="upload" id="uploadbutton">
        
              
              
        
        </div>
        
        
    </div>
    
    

<script src="https://www.gstatic.com/firebasejs/5.5.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCbwqBeu3PSbQhaQFmc_D0AmJF_I1EoNfs",
    authDomain: "shortjournal-957f7.firebaseapp.com",
    databaseURL: "https://shortjournal-957f7.firebaseio.com",
    projectId: "shortjournal-957f7",
    storageBucket: "shortjournal-957f7.appspot.com",
    messagingSenderId: "547786231089"
  };
  firebase.initializeApp(config);
</script>
    
    <script>
        var uploader = document.getElementById('uploader')
        var uploadbutton = document.getElementById('uploadbutton');
        
        uploadbutton.addEventListener('change',function(e){
            
            
            var file = e.target.files[0];
        
           var storageRef = firebase.storage().ref('Files/' + file.name);
            console.log(storageRef);
            
            var task = storageRef.put(file);
            
            task.on('state_changed',
                   
                   function progress(snapshot) {
                    var percentage = (snapshot.bytesTransferred /
                        snapshot.totalBytes) * 100;
                
                    uploader.value = percentage; 
                
            },
                    function error(err) {
                
                
            },
                    
                    function complete() {
                
                window.alert("Done");
                
                
            }
                   
                   )
            
            
            
        });
    
    
    
    
    </script>
    
    <script>
    
    
firebase.auth().onAuthStateChanged(function(user) {
                  if (user) {
                      
                      document.getElementById("upload_drop").style.display = "block";
                  }
                   else {   
                     
                       document.getElementById("upload_drop").style.display = "none";
                   }
                });

    
    
    
    </script>
    
    
</body> 


</html>
