<html>
<head>
     <meta charset="utf-8">
     <meta nhttp-equiv="x-ua-compatible" content="ie=edge,chrome=1">
    
    <link rel="stylesheet" href="main.css">
    
     <link href="bootstrap3/css/bootstrap.css" rel="stylesheet" />
 
	<link href="login-register.css" rel="stylesheet" />
	
	<script src="jquery/jquery-1.10.2.js" type="text/javascript"></script>
	<script src="bootstrap3/js/bootstrap.js" type="text/javascript"></script>
	<script src="login-register.js" type="text/javascript"></script>
    
    
     <style type="text/css">
         
         #logo {
             
             
             height: 100%;
             
         }
        
            #text_message {
                
               
                margin-top: 20px;
                font-size: 150%;
                font-family: 'Oswald',sans-serif;
            
            }
            
            .main-div, .loggedin-div {
                
                margin: 0px auto;
                margin-top: 100px;
                padding: 20px;
                width: 25%;
                
            }
        
            
            .main-div input {
                
                display: block;
                border: solid 1px #ccc;
                border-radius: 5px;
                background: #fff;
                padding: 15px;
                outline: none;
                width: 100%;
                margin-bottom: 15px;
            }
            
               .main-div input:focus{
                
                border: solid 1px #666;
            }
              
            .main-div button , .loggedin-div button {
                
                background: #5d8ffc;
                color: #fff;
                border: 0px;
                border-radius: 5px;
                padding: 10px;
                display: block;
                width: 100%; 
                transition: 0.25s;
                -webkit-transition: 0.25s;
                -moz-transition: 0.25s;
                
            }
            
            .main-div button:hover, .loggedin-div button:hover {
                background: #fff;
                color: #5d8ffc;
                border: solid 1px #5d8ffc;
                
                
            }
         
         #container_box_logout {

             margin-top: 10px;
         }
         
        
            
        </style>
</head>

<body>

    <div id="wrapper">
        <header id="top-section">
            <img src="atom.png" id="logo">
            <h1>The Bohring club</h1>
        </header>
        

        
        
        <nav>
            <ul class="menu">
            
                <li> <a href="homepage.html">home</a></li>
                <li> <a href="discover.html">discover</a></li>
                <div id="upload_drop"><li> <a href="upload.html">upload</a></li></div>
                <li> <a href="about.html">about</a></li>
                <li> <a href="login.html">login</a></li>
                
            
                
            </ul>
        </nav>
        
       <header id ="web-title">
            <h1 id="title_1">The Short Journal</h1>
           <h2 id="subtitle_1">An open source research paper repository</h2>
           
        </header>
    
    
         
    <div class="container" id="container_box">
        <div class="row">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                 <a class="btn big-login" data-toggle="modal" href="javascript:void(0)" onclick="openLoginModal();">Log in</a>
                 <a class="btn big-register" data-toggle="modal" href="javascript:void(0)" onclick="openRegisterModal();">Register</a></div>
            <div class="col-sm-4"></div>
        </div>
       
         
		 <div class="modal fade login" id="loginModal">
		      <div class="modal-dialog login animated">
    		      <div class="modal-content">
    		         <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Login with</h4>
                    </div>
                    <div class="modal-body">  
                        <div class="box">
                             <div class="content">
                                
                            
                                <div class="error"></div>
                                <div class="form loginBox" id="while_login">
                                    <form method="post" action="/login" accept-charset="UTF-8">
                                    <input id="email" class="form-control" type="text" placeholder="Email" name="email">
                                    <input id="password" class="form-control" type="password" placeholder="Password" name="password">
                                        <button class="btn btn-default btn-login" type="button" onclick="login()">Log In</button>
                                    </form>
                                </div>
                                 

                                 
                             </div>
                        </div>
                        <div class="box">
                            <div class="content registerBox"  id="while_register">
                             <div class="form">
                                <form method="post" html="{:multipart=>true}" data-remote="true" action="/register" accept-charset="UTF-8">
                               
                                <input id="name_reg" class="form-control" type="text" placeholder="Enter name" name="name">
                                <input id="email_reg" class="form-control" type="text" placeholder="Email" name="email">
                                <input id="number_reg" class="form-control" type="text" placeholder="Moblie no." name="number">
                                <input id="password_reg" class="form-control" type="password" placeholder="Password" name="password">        
                                <input id="password_confirmation" class="form-control" type="password" placeholder="Repeat Password" name="password_confirmation">
                                <button class="btn btn-default btn-register" type="button" value="Create account" name="commit" onclick="register()">Register</button>
                                </form>
                                 
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="forgot login-footer">
                            <span>Looking to 
                                 <a href="javascript: showRegisterForm();">Create an account</a>
                            ?</span>
                        </div>
                        <div class="forgot register-footer" style="display:none">
                             <span>Already have an account?</span>
                             <a href="javascript: showLoginForm();">Login</a>
                        </div>
                    </div>        
    		      </div>
		      </div>
		  </div>
    </div>
        
        <div class="container" id="container_box_logout">
        <div class="row">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                 <a class="btn big-login" data-toggle="modal" href="javascript:void(0)" onclick="logout()" >Log out</a>
            <div class="col-sm-4"></div>
        </div>
       
         
		 <div class="modal fade login" id="loginModal">
		      <div class="modal-dialog login animated">
    		      <div class="modal-content">
    		         <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Login with</h4>
                    </div>
                    <div class="modal-body">  
                        <div class="box">
                             <div class="content">
                                
                            
                                <div class="error"></div>
                                
                                 
                             </div>
                        </div>
                        
                    </div>       
    		      </div>
		      </div>
		  </div>
    </div>
        
        
        
        
      <div id="user_div">
        
        
        
        <h2>Welecome to TheShortJournal.</h2>
          <br>
          <h3>Thank you for logging in. Please discover.</h3>
        
        
        
        </div>  
        
        
    </div>
        
    </div>

<script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCbwqBeu3PSbQhaQFmc_D0AmJF_I1EoNfs",
    authDomain: "shortjournal-957f7.firebaseapp.com",
    databaseURL: "https://shortjournal-957f7.firebaseio.com",
    projectId: "shortjournal-957f7",
    storageBucket: "shortjournal-957f7.appspot.com",
    messagingSenderId: "547786231089"
  };
  firebase.initializeApp(config);
</script>
    
    <script>
        
        function login() {
    
            var userEmail = document.getElementById("email_reg").value;
            var userPass = document.getElementById("password_reg").value;
            
            var userName = document.getElementById("name_reg").value;
            var userNumber = document.getElementById("number_reg").value;
            
    
           
            
    firebase.auth().signInWithEmailAndPassword(userEmail, userPass).catch(function(error) {
                  
                  var errorCode = error.code;
                  var errorMessage = error.message;
                

                  
                });
            
            
            
            
        }
    
        
    
    function register( userName, userEmail, userNumber) {
        
        console.log("hi");
        
        var password_regis = document.getElementById("password_reg").value;
        var password_conf_regis = document.getElementById("password_confirmation").value;
        var email_regis = document.getElementById("email_reg").value;
        
        console.log (password_regis);
        
        if (password_regis == password_conf_regis) {

            firebase.auth().createUserWithEmailAndPassword(email_regis,password_regis).catch(function(error) {
                
                    var errorCode = error.code;
                    var errorMessage = error.message;
        
                    window.alert("Error : " + errorMessage);
                    });
        }
        else {
            
            window.alert("Passwords don't match. Try again.")
            
        }
        
        firebase.database().ref('Users/' + userName).set({
                        username: userName,
                        email: userEmail,
                        number: userNumber
                    });
        
    }
        
    function logout() {
        
        firebase.auth().signOut().then(function() {
  // Sign-out successful.
}).catch(function(error) {
  // An error happened.
});
    }
    
    
    
    
    </script>
    
    <script>
    
    
firebase.auth().onAuthStateChanged(function(user) {
                  if (user) {
                      document.getElementById("user_div").style.display = "block";
                      document.getElementById("container_box").style.display = "none";
                      document.getElementById("container_box_logout").style.display = "block";
                      document.getElementById("upload_drop").style.display = "block";
                  }
                   else {   
                     document.getElementById("user_div").style.display = "none";
                      document.getElementById("container_box").style.display = "block";
                      document.getElementById("container_box_logout").style.display = "none";
                       document.getElementById("upload_drop").style.display = "none";
                   }
                });

    
    
    
    </script>
    
</body>
</html>
